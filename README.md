# FutureSignals

**The Bloomberg of Prediction Market Signals**

Real-time prediction market intelligence platform. Monitors Polymarket, detects significant movements, correlates with social signals (XTracker), and generates AI-powered editorial narratives.

**Live:** [futuresignals.news](https://futuresignals.news)

## Features

- **Real-time Signal Detection** - Monitors Polymarket for significant probability changes
- **AI-Powered Narratives** - Bloomberg-style journalism generated by Qwen LLM
- **Social Signal Correlation** - Integrates XTracker to correlate tweets with market movements
- **Market Pulse Dashboard** - Category-level sentiment and momentum indicators
- **Multiple Article Types** - Breaking news, briefings, trending, deep dives, social signals
- **SEO Optimized** - JSON-LD schema, Google News compatible, SSR via Cloudflare Workers

## Architecture

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                           FUTURESIGNALS v1.1.0                                │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ┌────────────────┐    ┌────────────────┐    ┌────────────────┐              │
│  │   Polymarket   │───▶│     Signal     │───▶│   XTracker     │              │
│  │    Poller      │    │    Detector    │    │   Correlator   │              │
│  │    (Go)        │    │    (Go)        │    │    (Go)        │              │
│  └────────────────┘    └────────────────┘    └────────────────┘              │
│         │                     │                     │                         │
│         ▼                     ▼                     ▼                         │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                        Content Generator                                 │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │ │
│  │  │   Qwen LLM  │  │   Perplexity│  │  Enrichment │  │   Social    │    │ │
│  │  │  Narratives │  │   Context   │  │   Engine    │  │   Signals   │    │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘    │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                    │                                          │
│                                    ▼                                          │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                          MongoDB Atlas                                   │ │
│  │         Markets │ Snapshots │ Articles │ Categories                     │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                    │                                          │
│                                    ▼                                          │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                         REST API (Gin)                                   │ │
│  │   /articles │ /markets │ /categories │ /sentiment │ /feed/home          │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                    │                                          │
│                                    ▼                                          │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                    Frontend (Astro + React + shadcn/ui)                  │ │
│  │           SSR via Cloudflare Workers │ Tailwind CSS                      │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                               │
└──────────────────────────────────────────────────────────────────────────────┘
```

## Tech Stack

### Backend (Go 1.23+)
- **Framework:** Gin HTTP router
- **Database:** MongoDB Atlas
- **LLM:** Qwen (DashScope) for narrative generation
- **Context:** Perplexity API for external context
- **Social:** XTracker API (Polymarket Twitter tracker)

### Frontend (Astro 5.x)
- **Framework:** Astro with React islands
- **UI:** shadcn/ui + Tailwind CSS 4
- **Deploy:** Cloudflare Pages (SSR)
- **Icons:** Lucide React

### Infrastructure
- **Backend:** Kubernetes (GKE) via GHCR images
- **Frontend:** Cloudflare Pages (auto-deploy from GitHub)
- **Database:** MongoDB Atlas (M0 free tier)

## Quick Start

### Prerequisites

- Go 1.23+
- Node.js 20+ / pnpm
- MongoDB Atlas account
- API Keys: DashScope (Qwen), Perplexity (optional)

### Backend Setup

```bash
cd backend
cp .env.example .env
# Edit .env with your credentials

# Install dependencies
go mod download

# Run locally
go run cmd/signald/main.go
```

### Frontend Setup

```bash
cd frontend
pnpm install
pnpm dev
```

### Docker

```bash
# From project root
cp .env.example .env
vim .env  # Configure all API keys

docker compose up -d
```

## Configuration

### Backend Environment Variables

| Variable | Default | Description |
|----------|---------|-------------|
| `MONGODB_URI` | (required) | MongoDB connection string |
| `DASHSCOPE_API_KEY` | (required) | Qwen Cloud API key |
| `PERPLEXITY_API_KEY` | (optional) | For external context enrichment |
| `QWEN_MODEL` | `qwen-plus` | Model for narratives |
| `MIN_PROBABILITY_CHANGE` | `0.05` | Min change to trigger signal (5%) |
| `MIN_VOLUME_24H` | `10000` | Min 24h volume in USD |
| `POLL_INTERVAL` | `5m` | Market polling interval |
| `PORT` | `8080` | API server port |

### Frontend Environment Variables

| Variable | Description |
|----------|-------------|
| `PUBLIC_API_URL` | Backend API URL |

## API Endpoints

### Articles
- `GET /api/articles` - List articles with pagination
- `GET /api/articles/:slug` - Get article by slug
- `GET /api/articles/type/:type` - Filter by type

### Markets
- `GET /api/markets` - List markets with filters
- `GET /api/markets/:id` - Get market details
- `GET /api/markets/:id/snapshots` - Price history

### Categories
- `GET /api/categories` - List all categories
- `GET /api/categories/:slug` - Category with markets/articles

### Feed & Sentiment
- `GET /api/feed/home` - Homepage feed (featured, recent, trending)
- `GET /api/sentiment` - Market Pulse (category momentum)

### Health
- `GET /health` - Service health check
- `GET /api/stats` - Platform statistics

## Signal Detection

```
SIGNAL DETECTED IF:
├─ Δ probability ≥ ±5% since last check
├─ Volume 24h > $10,000
├─ Market is active (not closed)
└─ OR: New market with > $50k volume in first 48h
```

## Article Types

| Type | Description |
|------|-------------|
| `breaking` | Major probability shifts (>10%) |
| `trending` | Significant volume + movement |
| `new_market` | New high-interest markets |
| `briefing` | Morning/evening digests |
| `deep_dive` | In-depth analysis |
| `social_signal` | Based on influencer tweets |

## XTracker Integration (v1.1.0)

Social signal correlation with Polymarket's Twitter tracker:

```go
// Correlates tweets with market movements
type SocialSignal struct {
    Handle          string
    Content         string
    TweetURL        string
    MarketImpact    float64      // Probability change after tweet
    ImpactWindow    string       // e.g., "30m", "1h", "2h"
    AffectedMarkets []MarketMovement
}
```

**How it works:**
1. XTracker client fetches recent posts from tracked influencers
2. Correlator matches tweets to markets via keyword extraction
3. Impact calculated by comparing prob before/after tweet (2h window)
4. Articles enriched with social signals as verifiable sources
5. LLM prompted to cite influencers in narratives

## Project Structure

```
futuresignals/
├── backend/
│   ├── cmd/
│   │   ├── signald/              # Main daemon
│   │   └── backfill/             # Historical data import
│   ├── internal/
│   │   ├── api/                  # REST API handlers
│   │   ├── config/               # Configuration
│   │   ├── content/              # Article generation
│   │   ├── models/               # Data models
│   │   ├── perplexity/           # Context enrichment
│   │   ├── polymarket/           # Polymarket API client
│   │   ├── qwen/                 # Qwen LLM client
│   │   ├── repository/           # MongoDB repositories
│   │   └── xtracker/             # Social signal correlation
│   ├── Dockerfile
│   └── go.mod
├── frontend/
│   ├── src/
│   │   ├── components/           # React + Astro components
│   │   ├── layouts/              # Page layouts
│   │   ├── lib/                  # API client, utils, types
│   │   └── pages/                # Astro pages (SSR)
│   ├── astro.config.mjs
│   └── package.json
├── k8s/                          # Kubernetes manifests
├── docker-compose.yml
└── README.md
```

## Deployment

### Backend (Kubernetes)

```bash
# Build and push
docker build -t ghcr.io/leeaandrob/futuresignal-news/backend:v1.1.0 ./backend
docker push ghcr.io/leeaandrob/futuresignal-news/backend:v1.1.0

# Deploy
kubectl set image deployment/futuresignals-backend \
  backend=ghcr.io/leeaandrob/futuresignal-news/backend:v1.1.0
```

### Frontend (Cloudflare Pages)

Auto-deploys on push to `main` branch.

## Roadmap

### Completed
- [x] Backend: Signal detector (Go)
- [x] Backend: Polymarket API client
- [x] Backend: Qwen LLM integration
- [x] Backend: MongoDB persistence
- [x] Backend: REST API (articles, markets, categories)
- [x] Backend: Perplexity context enrichment
- [x] Backend: XTracker social signal correlation
- [x] Backend: Backfill tool for historical data
- [x] Frontend: Astro + React + shadcn/ui
- [x] Frontend: Article pages with SEO
- [x] Frontend: Market cards with probability bars
- [x] Frontend: Market Pulse sentiment bar
- [x] Frontend: Social signals display
- [x] Frontend: Twitter share + copy link
- [x] Deploy: Kubernetes (GKE)
- [x] Deploy: Cloudflare Pages (SSR)

### Planned
- [ ] RSS/Atom feeds
- [ ] Email newsletter (Resend)
- [ ] Push notifications
- [ ] Audio briefings (ElevenLabs)
- [ ] Expand to Kalshi, Metaculus
- [ ] Premium API access

## Releases

### v1.1.0 (2024-12-19)
- XTracker social signal integration
- Social signals displayed in articles
- LLM prompts cite influencer sources
- Twitter share buttons

### v1.0.0 (2024-12-18)
- Initial release
- Full backend with signal detection
- Frontend with articles, markets, categories
- Market Pulse sentiment indicators

## License

MIT

---

*Built by [@leeaandrob](https://twitter.com/leeaandrob)*
